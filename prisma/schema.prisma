generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model borrow_record {
  id          Int          @id @default(autoincrement())
  customer_id Int
  amount      Float
  rem_amount  Float
  borrow_date DateTime
  status      RecordStatus @default(PENDING)
  created_at  DateTime     @default(now())
  pay_records pay_record[]
  customer    customer?    @relation(fields: [customerId], references: [id])
  customerId  Int
}

enum RecordStatus {
  IDEAL
  PENDING
  COMPLETED
}

model credential {
  id            Int    @id @default(autoincrement())
  username      String @unique
  hash_password String
}

model customer {
  id         Int             @id @default(autoincrement())
  name       String
  email      String?
  phone      String?
  address    String?
  created_at DateTime        @default(now())
  updated_at DateTime        @updatedAt
  records    borrow_record[]
}

model pay_record {
  id               Int            @id @default(autoincrement())
  record_id        BigInt
  amount           Float
  notes            String
  payment_date     DateTime
  created_at       DateTime       @default(now())
  borrow_record    borrow_record? @relation(fields: [borrow_record_id], references: [id])
  borrow_record_id Int
}
